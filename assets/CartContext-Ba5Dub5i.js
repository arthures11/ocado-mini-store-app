import{a as s,o as l}from"./chunk-D4RADZKF-5GD_Vqhz.js";import{g}from"./priceUtils-B0uR9NUr.js";const u=s.createContext(void 0),y=()=>{const a=s.useContext(u);if(!a)throw new Error("useCart must be used within a CartProvider");return a},w=({children:a})=>{const[o,i]=s.useState(()=>{if(typeof window<"u"){const t=localStorage.getItem("shoppingCart");return t?JSON.parse(t):[]}else return});s.useEffect(()=>{typeof window<"u"&&localStorage.setItem("shoppingCart",JSON.stringify(o))},[o]);const c=t=>{i(r=>r.find(e=>e.id===t.id)?r.map(e=>e.id===t.id?{...e,quantity:e.quantity+1}:e):[...r,{...t,quantity:1}])},d=t=>{i(r=>r.filter(n=>n.id!==t))},f=(t,r)=>{i(n=>n.map(e=>e.id===t?{...e,quantity:r}:e).filter(e=>e.quantity>0))},C=()=>{i([]),typeof window<"u"&&localStorage.removeItem("shoppingCart")},p=()=>o==null?void 0:o.reduce((t,r)=>{const n=g(r.price);return t+n*r.quantity},0);return l.jsx(u.Provider,{value:{cartItems:o,addToCart:c,removeFromCart:d,updateQuantity:f,clearCart:C,getTotalCost:p},children:a})};export{w as C,y as u};
